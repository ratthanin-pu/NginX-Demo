Demo script

#1. login to ocp cluster
oc login -u demo01 -p demo01  https://api.ocpcluster.gabledemo.com:6443

login to OpenShift console 
https://console-openshift-console.apps.ocpcluster.gabledemo.com
u: demo01
p: demo01

#2. deploy web bullet blue
goto folder C:\Users\admin-01\Desktop\NginXPlus-demo\BlueGreen\bullet-web

cd C:\Users\admin-01\Desktop\NginXPlus-demo\BlueGreen\bullet-web
oc apply -f 01-Blue-Web-Deployment.yaml

#3. deploy virtual server for nginX ingress controll
goto folder C:\Users\admin-01\Desktop\NginXPlus-demo\BlueGreen

cd C:\Users\admin-01\Desktop\NginXPlus-demo\BlueGreen
oc apply -f 01-bg-blue-vs.yaml

#4. Open chrome 
access to web http://dot.demo.ocpcluster.gabledemo.com/
must show blue bullet web
*default is blue


cd C:\Users\admin-01\Desktop\NginXPlus-demo\BlueGreen\bullet-web
oc apply -f 02-Greenc-Web-Deployment.yaml
oc apply -f 03-Red-Web-Deployment.yaml


#5. Usecase #1 
Test a New Version in Production
solution : Debug Routing

delete existing virtual server configure
oc delete -f 01-bg-blue-vs.yaml

apply yaml for usecase Debug Routing
oc apply -f 02-1-bg-condition-header-vs.yaml

goto chrome browser 
- clear cache
- set header request value to "version" value = green
- reload web http://dot.demo.ocpcluster.gabledemo.com/
must show green with header parameter

#6. Usecase #2
Find out if customers like a new version beeter than the current version
solution : A/B testing

delete existing virtual server configure
oc delete -f 02-1-bg-condition-header-vs.yaml

apply yaml for usecase Debug Routing
oc apply -f 02-2-bg-ab-test.yaml

goto chrome browser 
- clear cache
- set header request value to "version" 
   value = blue
- clear cache
- reload web http://dot.demo.ocpcluster.gabledemo.com/
* must show blue with header parameter blue
- set header request value to "version" 
   value = green
- clear cache
- reload web http://dot.demo.ocpcluster.gabledemo.com/
must show green with header parameter green


#7. Usecase #3
Find out if customers like a new version beeter than the current version
solution : Canary Deployment

delete existing virtual server configure
oc delete -f 02-2-bg-ab-test.yaml

apply yaml for usecase Debug Routings
oc apply -f 03-bg-split-vs.yaml

goto chrome browser 
- remove header request parameter
- clear cache
- reload web http://dot.demo.ocpcluster.gabledemo.com/
* must show mix with green 50% blue 20% red to 30% 
- adjust green to 70% blue to 10% red to 20%
- clear cache
- reload web http://dot.demo.ocpcluster.gabledemo.com/

#8. Usecase #3.1
Find out if customers like a new version beeter than the current version
solution : Canary Deployment with condition 

delete existing virtual server configure
oc delete -f 03-bg-split-vs.yaml

apply yaml for usecase Debug Routings
oc apply -f 04-1-bg-split-condition-header-vs.yaml

goto chrome browser 
- clear cache
- set header request value to "user" 
   value = testgroup
- clear cache
- reload web http://dot.demo.ocpcluster.gabledemo.com/
* must show mix with green 70% blue 30% with header parameter


#9. Deploy new web

delete existing virtual server configure
oc delete -f 04-1-bg-split-condition-header-vs.yaml

apply yaml for usecase Debug Routings
oc apply -f 05-bg-green-vs.yaml

goto chrome browser 
- clear cache
- reload web http://dot.demo.ocpcluster.gabledemo.com/



usecase list
1 Debug routing
2 A/B testing
3 Canary deployment
3.1 Canary with condition
4 Blue-Green Deployment






 

